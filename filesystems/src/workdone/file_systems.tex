\clearpage
\section{File systems}

\subsection{FAT filesystems}

\begin{figure}[h]
    \centering
    \begin{tikzpicture}[
            _rect/.style = {
                rectangle,
                align=center,
				inner sep=0pt,
				outer sep=0pt
            },
            arrow/.style = {
                ultra thick, 
                ->,
                >=stealth
            },
			fontscale/.style = {
				font=\footnotesize
			}
        ]
        \node (boot) [_rect, minimum height=2cm, minimum width=2cm, draw=gray, fill=gray, fontscale] {Boot sector};
        \node (first_fat) at ([xshift=10mm]boot.east) [_rect, minimum height=2cm, minimum width=2cm, draw=red, fill=red, fontscale] {First FAT};
        \draw [-] (first_fat.north east) -- (first_fat.south east);
        \node (second_fat) at ([xshift=10mm]first_fat.east) [_rect, minimum height=2cm, minimum width=2cm, draw=red, fill=red, fontscale] {Second FAT};
        \node (data) at ([xshift=50mm]second_fat.east) [_rect, minimum height=2cm, minimum width=10cm, draw=blue, fill=blue, fontscale] {Data region};
    \end{tikzpicture}
    \caption{Basic structure of a FAT partition}
\end{figure}

\subsection{FAT16}

\begin{figure}[h]
    \centering
    \begin{tikzpicture}[
            _rect/.style = {
                rectangle,
                align=center,
				inner sep=0pt,
				outer sep=0pt
            },
            arrow/.style = {
                ultra thick, 
                ->,
                >=stealth
            },
			fontscale/.style = {
				font=\footnotesize
			}
        ]
        \node (boot) [_rect, minimum height=2cm, minimum width=2cm, draw=gray, fill=gray, fontscale] {Boot sector};
        \node (first_fat) at ([xshift=10mm]boot.east) [_rect, minimum height=2cm, minimum width=2cm, draw=red, fill=red, fontscale] {First FAT};
        \draw [-] (first_fat.north east) -- (first_fat.south east);
        \node (second_fat) at ([xshift=10mm]first_fat.east) [_rect, minimum height=2cm, minimum width=2cm, draw=red, fill=red, fontscale] {Second FAT};
        \node (root) at ([xshift=10mm]second_fat.east) [_rect, minimum height=2cm, minimum width=2cm, draw=green, fill=green, fontscale] {Root dir};
        \node (data) at ([xshift=40mm]root.east) [_rect, minimum height=2cm, minimum width=8cm, draw=blue, fill=blue, fontscale] {Data region};
    \end{tikzpicture}
    \caption{Basic structure of a FAT16 partition}
\end{figure}

\subsubsection{The boot sector}

% \renewcommand\theadalign{bc}
% \renewcommand\theadfont{\bfseries}
% \renewcommand\theadgape{\Gape[4pt]}
% % \renewcommand\cellgape{\Gape[4pt]}

\subsubsection{The FAT regions}

\cite{FAT_filesystem}
\gls{FAT}

\subsection{FAT32}

\begin{figure}[h]
    \centering
    \begin{tikzpicture}[
            _rect/.style = {
                rectangle,
                align=center,
				inner sep=0pt,
				outer sep=0pt
            },
            arrow/.style = {
                ultra thick, 
                ->,
                >=stealth
            },
			fontscale/.style = {
				font=\footnotesize
			}
        ]
        \node (boot) [_rect, minimum height=2cm, minimum width=2cm, draw=gray, fill=gray, fontscale] {Boot sector};
        \draw [-] (boot.north east) -- (boot.south east);
        \node (reserved) at ([xshift=10mm]boot.east) [_rect, minimum height=2cm, minimum width=2cm, draw=gray, fill=gray, fontscale] {Reserved};
        \node (first_fat) at ([xshift=10mm]reserved.east) [_rect, minimum height=2cm, minimum width=2cm, draw=red, fill=red, fontscale] {First FAT};
        \draw [-] (first_fat.north east) -- (first_fat.south east);
        \node (second_fat) at ([xshift=10mm]first_fat.east) [_rect, minimum height=2cm, minimum width=2cm, draw=red, fill=red, fontscale] {Second FAT};
        \node (data) at ([xshift=40mm]second_fat.east) [_rect, minimum height=2cm, minimum width=8cm, draw=blue, fill=blue, fontscale] {Data region};
    \end{tikzpicture}
    \caption{Basic structure of a FAT32 partition}
\end{figure}

\subsubsection{The boot sector}

\subsubsection{The FAT regions}

\subsection{exFAT}

\begin{figure}[h]
    \centering
    \begin{tikzpicture}[
            _rect/.style = {
                rectangle,
                align=center,
				inner sep=0pt,
				outer sep=0pt
            },
            arrow/.style = {
                ultra thick, 
                ->,
                >=stealth
            },
			fontscale/.style = {
				font=\footnotesize
			}
        ]
        \node (boot) [_rect, minimum height=2cm, minimum width=2cm, draw=gray, fill=gray, fontscale] {Boot region};
        \draw [-] (boot.north east) -- (boot.south east);
        \node (backup_boot) at ([xshift=10mm]boot.east) [_rect, minimum height=2cm, minimum width=2cm, draw=gray, fill=gray, fontscale] {Backup\\boot region};
        \node (first_fat) at ([xshift=10mm]backup_boot.east) [_rect, minimum height=2cm, minimum width=2cm, draw=red, fill=red, fontscale] {First FAT};
        \draw [-] (first_fat.north east) -- (first_fat.south east);
        \node (second_fat) at ([xshift=10mm]first_fat.east) [_rect, minimum height=2cm, minimum width=2cm, draw=red, fill=red, fontscale] {Second FAT};
        \node (data) at ([xshift=40mm]second_fat.east) [_rect, minimum height=2cm, minimum width=8cm, draw=blue, fill=blue, fontscale] {Data region};
    \end{tikzpicture}
    \caption{Basic structure of a exFAT partition}
\end{figure}

\subsubsection{The boot region}

\subsubsection{The FAT regions}